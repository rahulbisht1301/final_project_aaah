{% extends "admin_dashboard/base.html" %}

{% block content %}
<h2 style="margin-bottom: 1.5rem; color: #2c3e50;">üë§ User Details</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
    <div class="card">
        <h3 style="margin-bottom: 1.5rem; color: #2c3e50;">User Information</h3>
        <table style="border-collapse: collapse;">
            <tr>
                <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Username:</td>
                <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">{{ user.username }}</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Email:</td>
                <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">{{ user.email }}</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Role:</td>
                <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;"><span class="badge badge-info">{{ user.role }}</span></td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Joined:</td>
                <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">{{ user.date_joined|date:"M d, Y H:i" }}</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Last Login:</td>
                <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">
                    {% if user.last_login %}
                        {{ user.last_login|date:"M d, Y H:i" }}
                    {% else %}
                        Never
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; font-weight: bold;">Status:</td>
                <td style="padding: 0.75rem;">
                    {% if user.is_active %}
                        <span class="badge badge-success">Active</span>
                    {% else %}
                        <span class="badge badge-danger">Inactive</span>
                    {% endif %}
                </td>
            </tr>
        </table>
    </div>
    
    <div class="card">
        <h3 style="margin-bottom: 1.5rem; color: #2c3e50;">
            {% if user.is_investor %}
                üí∞ Investor Profile
            {% elif user.is_startup %}
                üöÄ Startup Profile
            {% elif user.is_manufacturer %}
                üè≠ Manufacturer Profile
            {% endif %}
        </h3>
        
        {% if user.is_investor %}
            {% if profile %}
                <table style="border-collapse: collapse; width: 100%;">
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Investment Range:</td>
                        <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">${{ profile.investment_range_min }} - ${{ profile.investment_range_max }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Industry Focus:</td>
                        <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">{{ profile.industry_focus|default:"Not specified" }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Location:</td>
                        <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">{{ profile.location|default:"Not specified" }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold;">Applications:</td>
                        <td style="padding: 0.75rem;">{{ applications }}</td>
                    </tr>
                </table>
            {% endif %}
        
        {% elif user.is_startup %}
            {% if startup %}
                <table style="border-collapse: collapse; width: 100%;">
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Startup Name:</td>
                        <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">{{ startup.name }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Niche:</td>
                        <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">{{ startup.niche }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Stage:</td>
                        <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">{{ startup.stage }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Valuation:</td>
                        <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">${{ startup.valuation }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Status:</td>
                        <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">
                            {% if startup.approved %}
                                <span class="badge badge-success">‚úì Approved</span>
                            {% else %}
                                <span class="badge badge-warning">‚è≥ Pending</span>
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Applications:</td>
                        <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">{{ applications }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold;">Connections:</td>
                        <td style="padding: 0.75rem;">{{ connections }}</td>
                    </tr>
                </table>
            {% endif %}
        
        {% elif user.is_manufacturer %}
            {% if profile %}
                <table style="border-collapse: collapse; width: 100%;">
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Company Name:</td>
                        <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">{{ profile.company_name }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Industry:</td>
                        <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">{{ profile.industry|default:"Not specified" }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Production Capacity:</td>
                        <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">{{ profile.production_capacity }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold; border-bottom: 1px solid #ecf0f1;">Location:</td>
                        <td style="padding: 0.75rem; border-bottom: 1px solid #ecf0f1;">{{ profile.location|default:"Not specified" }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; font-weight: bold;">Connections:</td>
                        <td style="padding: 0.75rem;">{{ connections }}</td>
                    </tr>
                </table>
            {% endif %}
        {% endif %}
    </div>
</div>

<div style="margin-top: 2rem;">
    <a href="{% url 'manage_users' %}" class="btn btn-primary">‚Üê Back to Users</a>
    <a href="{% url 'delete_user' user.id %}" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this user?');">Delete User</a>
</div>
{% endblock %}
