{% extends 'base.html' %}

{% block content %}
<div class="hero" style="padding: 40px 20px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
    <h1>Investor Dashboard</h1>
    <p>Welcome back, {{ request.user.username }}!</p>
    <div style="margin-top: 15px;">
        <a href="{% url 'investor_profile' %}" class="btn" style="background: rgba(255,255,255,0.2); margin-right: 10px;">Edit Profile</a>
        <form method="post" action="{% url 'investor_logout' %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn" style="background: rgba(220,53,69,0.9); border: none; cursor: pointer;">Logout</button>
        </form>
    </div>
</div>

<div class="section">
    <h2>Overview</h2>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="number" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">{{ total_startups }}</div>
            <div class="label">Available Startups</div>
        </div>
        <div class="stat-card">
            <div class="number" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">{{ total_applications }}</div>
            <div class="label">Total Applications</div>
        </div>
        <div class="stat-card">
            <div class="number" style="background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">{{ pending_applications }}</div>
            <div class="label">Pending Review</div>
        </div>
        <div class="stat-card">
            <div class="number" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">{{ accepted_applications }}</div>
            <div class="label">Accepted</div>
        </div>
    </div>
</div>

<div class="section">
    <h2>Quick Actions</h2>
    <div class="cards">
        <a href="{% url 'browse_startups' %}" class="card" style="text-decoration: none; color: inherit;">
            <h3>üîç Browse Startups</h3>
            <p>Discover innovative startups to invest in.</p>
        </a>
        <a href="{% url 'investor_applications' %}" class="card" style="text-decoration: none; color: inherit;">
            <h3>üìã Applications {% if pending_applications %}<span class="badge">{{ pending_applications }}</span>{% endif %}</h3>
            <p>Review investment applications from startups.</p>
        </a>
        <a href="{% url 'saved_startups' %}" class="card" style="text-decoration: none; color: inherit;">
            <h3>‚ù§Ô∏è Saved Startups</h3>
            <p>View your favorite startups.</p>
        </a>
        <a href="{% url 'investor_profile' %}" class="card" style="text-decoration: none; color: inherit;">
            <h3>‚öôÔ∏è Edit Profile</h3>
            <p>Update your investment preferences.</p>
        </a>
    </div>
</div>

<div class="section">
    <h2>Featured Startups</h2>
    <div class="cards">
        {% for startup in startups %}
        <div class="card">
            <h3>{{ startup.name }}</h3>
            <p><strong>Niche:</strong> {{ startup.niche }}</p>
            <p><strong>Stage:</strong> {{ startup.stage }}</p>
            <p><strong>Valuation:</strong> ${{ startup.valuation|floatformat:0 }}</p>
            <a href="{% url 'startup_detail_investor' startup.id %}" class="btn" style="display: inline-block; margin-top: 10px;">View Details</a>
        </div>
        {% empty %}
        <p>No startups available yet.</p>
        {% endfor %}
    </div>
    <div style="text-align: center; margin-top: 20px;">
        <a href="{% url 'browse_startups' %}" class="btn">View All Startups</a>
    </div>
</div>

{% if applications %}
<div class="section">
    <h2>Recent Applications</h2>
    <div class="cards">
        {% for app in applications %}
        <div class="card">
            <h3>{{ app.startup.name }}</h3>
            <p><strong>Amount:</strong> ${{ app.amount_requested|floatformat:0 }}</p>
            <p><strong>Equity:</strong> {{ app.equity_offered }}%</p>
            <p><strong>Status:</strong>
                <span style="padding: 3px 10px; border-radius: 15px; font-size: 12px;
                    {% if app.status == 'ACCEPTED' %}background: #d4edda; color: #155724;
                    {% elif app.status == 'REJECTED' %}background: #f8d7da; color: #721c24;
                    {% else %}background: #fff3cd; color: #856404;{% endif %}">
                    {{ app.status }}
                </span>
            </p>
        </div>
        {% endfor %}
    </div>
    <div style="text-align: center; margin-top: 20px;">
        <a href="{% url 'investor_applications' %}" class="btn">View All Applications</a>
    </div>
</div>
{% endif %}

{% endblock %}
