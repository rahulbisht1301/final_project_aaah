{% extends 'base.html' %}

{% block content %}
<div class="hero" style="padding: 40px 20px;">
    <h1>Investment Applications</h1>
    <p>Review applications from startups seeking investment</p>
</div>

<div class="section" style="padding: 20px 50px;">
    <div class="cards">
        {% for app in applications %}
        <div class="card">
            <h3>{{ app.startup.name }}</h3>
            <p><strong>Niche:</strong> {{ app.startup.niche }}</p>
            <p><strong>Amount Requested:</strong> ${{ app.amount_requested|floatformat:0 }}</p>
            <p><strong>Equity Offered:</strong> {{ app.equity_offered }}%</p>
            <p><strong>Message:</strong> {{ app.message|truncatewords:20 }}</p>
            
            <p style="margin-top: 15px;"><strong>Status:</strong>
                <span style="padding: 3px 10px; border-radius: 15px; font-size: 12px;
                    {% if app.status == 'ACCEPTED' %}background: #d4edda; color: #155724;
                    {% elif app.status == 'REJECTED' %}background: #f8d7da; color: #721c24;
                    {% else %}background: #fff3cd; color: #856404;{% endif %}">
                    {{ app.status }}
                </span>
            </p>
            
            {% if app.status == 'PENDING' %}
            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <form method="post" action="{% url 'update_application_status' app.id 'ACCEPTED' %}" style="flex: 1;">
                    {% csrf_token %}
                    <button type="submit" class="btn" style="width: 100%; background: #28a745; border: none; cursor: pointer;">
                        ✓ Accept
                    </button>
                </form>
                <form method="post" action="{% url 'update_application_status' app.id 'REJECTED' %}" style="flex: 1;">
                    {% csrf_token %}
                    <button type="submit" class="btn" style="width: 100%; background: #dc3545; border: none; cursor: pointer;">
                        ✗ Reject
                    </button>
                </form>
            </div>
            {% endif %}
            
            <div style="margin-top: 15px;">
                <a href="{% url 'startup_detail_investor' app.startup.id %}" style="color: #f5576c;">View Startup Details →</a>
            </div>
        </div>
        {% empty %}
        <div style="text-align: center; padding: 40px; width: 100%;">
            <p>No applications received yet.</p>
            <a href="{% url 'browse_startups' %}" class="btn" style="display: inline-block; margin-top: 15px;">Browse Startups</a>
        </div>
        {% endfor %}
    </div>
</div>

<div style="text-align: center; padding: 20px;">
    <a href="{% url 'investor_dashboard' %}" style="color: #666; text-decoration: none;">← Back to Dashboard</a>
</div>

{% endblock %}
